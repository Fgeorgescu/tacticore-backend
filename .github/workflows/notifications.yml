name: CI Notifications

on:
  workflow_run:
    workflows: ["CI/CD Pipeline"]
    types: [completed]

jobs:
  notify:
    name: Notify CI Status
    runs-on: ubuntu-latest
    if: always()
    
    steps:
    - name: Notify Success
      if: ${{ github.event.workflow_run.conclusion == 'success' }}
      run: |
        echo "‚úÖ CI/CD Pipeline completed successfully!"
        echo "üéâ All tests passed and code quality checks completed"
        # Aqu√≠ se pueden agregar notificaciones a Slack, Discord, etc.
        # curl -X POST -H 'Content-type: application/json' \
        #   --data '{"text":"‚úÖ Tacticore Backend CI/CD completed successfully!"}' \
        #   $SLACK_WEBHOOK_URL
        
    - name: Notify Failure
      if: ${{ github.event.workflow_run.conclusion == 'failure' }}
      run: |
        echo "‚ùå CI/CD Pipeline failed!"
        echo "üîç Please check the logs for details"
        # Aqu√≠ se pueden agregar notificaciones de error
        # curl -X POST -H 'Content-type: application/json' \
        #   --data '{"text":"‚ùå Tacticore Backend CI/CD failed! Check logs: ${{ github.event.workflow_run.html_url }}"}' \
        #   $SLACK_WEBHOOK_URL
        
    - name: Notify Cancelled
      if: ${{ github.event.workflow_run.conclusion == 'cancelled' }}
      run: |
        echo "‚èπÔ∏è CI/CD Pipeline was cancelled"
        # curl -X POST -H 'Content-type: application/json' \
        #   --data '{"text":"‚èπÔ∏è Tacticore Backend CI/CD was cancelled"}' \
        #   $SLACK_WEBHOOK_URL

